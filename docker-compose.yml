services:
  mark-six-bot:
    build: .
    container_name: mark-six-bot
    restart: unless-stopped
    env_file: .env
    
    # Volume mounts for persistent data
    volumes:
      - ./history.csv:/app/history.csv
      - ./charts:/app/charts
      - ./temp_images:/app/temp_images
    
    # Memory constraints for 1GB RAM + 2GB Swap (GCP e2-micro)
    deploy:
      resources:
        limits:
          memory: 850M
        reservations:
          memory: 512M
    
    # Log rotation to save disk space (30GB GCP disk)
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
